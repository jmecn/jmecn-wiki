<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><title>groovy_event</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jmecn/wiki/edit/master/src/docs/asciidoc/advanced/script/groovy_event.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jmecn/wiki/new/master/src/docs/asciidoc/advanced/script/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>groovy_event</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#event-trigger-manager">Event - Trigger - Manager</a><ul class="sectlevel2"><li><a href="#event">Event</a></li><li><a href="#trigger">Trigger</a></li><li><a href="#manager">Manager</a></li><li><a href="#gquery">GQuery</a></li></ul></li></ul></div></div><div id="content"><div class="sect2"><h3 id="event-trigger-manager">Event - Trigger - Manager</h3><div class="paragraph"><p>Event , Trigger , Manager are the 3 most important terms in game programming and scripting that worth to mention in the first place!</p></div>
<div class="sect2"><h3 id="event">Event</h3><div class="paragraph"><p>Event is the core element (concept) and the unit of the Messaging System. When components in the game world communicate with each other through pipelines, Messages from one object need to be sent to other objects should also aware of it (to nofity) when some thing happen that. It&#8217;s called an event; and inside of the event contain piece of imformations that describe the Message.</p></div>
<div class="paragraph"><p>If Scripting, Event play important role too. It&#8217;s almost shown up in EventHook to the cycle as: onInit, onUpdate, onClick.. It also provide ad-hoc communicate which in turn enable additional complex and flexible usage to existed systems. We will go deep into its usages later.</p></div>
<div class="sect3"><h4 id="eventbus">EventBus</h4><div class="paragraph"><p>Event paradigm is implemented differently in every software that require it, to fit with the specific requirements. Recently we (Java world) have something quite generic that suite for wide range of cases and use intuitive methods to program. It&#8217;s called EventBus. And fortunately , EventBus fit very well with Groovy scripting solution (kudos!)</p></div>
<div class="paragraph"><p>…and few Event concepts Explained!</p></div>
<div class="paragraph"><p><a href="http://code.google.com/p/guava-libraries/wiki/EventBusExplained">http://code.google.com/p/guava-libraries/wiki/EventBusExplained</a></p></div>
<div class="paragraph"><p><a href="http://codingjunkie.net/guava-eventbus/">http://codingjunkie.net/guava-eventbus/</a></p></div></div>
<div class="sect3"><h4 id="groovy-eventbus-helloworld">Groovy Eventbus HelloWorld</h4><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">com.google.common.eventbus.EventBus</span>
<span class="include">import</span> <span class="include">com.google.common.eventbus.Subscribe</span>

<span class="include">EventBus</span> <span class="include">eventBus</span> = <span class="include">new</span> <span class="include">EventBus</span>();

<span class="type">class</span> <span class="class">EventHandler</span>{
    <span class="annotation">@Subscribe</span>
    <span class="directive">public</span> <span class="type">void</span> hello(CustomEvent event){
        println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello world</span><span class="delimiter">&quot;</span></span>
    }
}

<span class="type">class</span> <span class="class">CustomEvent</span>{

}
handler = <span class="keyword">new</span> <span class="predefined-type">EventHandler</span>();
eventBus.register(handler);

eventBus.post(<span class="keyword">new</span> CustomEvent());</code></pre></div></div>
<div class="paragraph"><p>In this example,</p></div>
<div class="paragraph"><p>Here, EventBus will play the communicate media in our Groovy scripting solution.</p></div></div>
<div class="sect3"><h4 id="hooks">Hooks</h4></div></div>
<div class="sect2"><h3 id="trigger">Trigger</h3><div class="paragraph"><p>If you build up your game world&#8217;s activites from Action, Trigger is the brick to build Gameplay. It&#8217;s the combination of : Event + Condition → Action</p></div>
<div class="paragraph"><p>The concept of trigger can be describle like this: When an Event happen, if it&#8217;s passed a Condition check, the Action is taken. A more detailed description envolve: the Enviroment - a specific Context of those 3 (E - C - A), Durations , Threaded or not, Executor … But here we concern the most simple form, the Context is the single specific that procedure the Event and its Global awareness.</p></div>
<div class="paragraph"><p>In Groovy,</p></div>
<div class="ulist"><ul><li><p>Event is Class based, mentioned in the chapter above.</p></li><li><p>Condition can be modeled with a Closure</p></li><li><p>Action also very suitable with a Closure representation.</p></li></ul></div>
<div class="sect3"><h4 id="example1">Example1:</h4><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Example1:</code></pre></div></div>
<div class="sect4"><h5 id="example2">Example2:</h5><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Example2:</code></pre></div></div></div></div></div>
<div class="sect2"><h3 id="manager">Manager</h3><div class="paragraph"><p>Manager is the concept of who have responsibities and power over others (as its children or employee in the real world), essentially it is a list of its children, and have basic opertions like add,remove to manage that list… You can also think about it as the Control of the MVC paradigm where it is the mediator between Model and View. In JME3, you see Manager every where such as AssetManager, StateManager as the wraper of underlying functions. So, event mixed up quite a lot concepts at once, Manager in Scripting is extremely useful and fullfill the missing piece of the picture we are painting for a while here.</p></div>
<div class="paragraph"><p>To clean the mist of confusion about mixed of concepts a little bit, there are some practical wisdoms about Manager implementation:</p></div>
<div class="ulist"><ul><li><p>Manager acts globally, handy: usually a Singleton, or really easy to reference in script</p><div class="ulist"><ul><li><p>Manager wrap underlying details in intuitive way</p></li><li><p>Manager share common informations</p></li><li><p>Manager executions are frequently : like in an default update cycle</p></li><li><p>Manager have power over its children : its handle it children; in almost scenarios child has left its Manager&#8217;s list come hollow (as null)</p></li></ul></div></li></ul></div>
<div class="paragraph"><p>All the concepts and wisdoms is describes much more detail in Atom framework Design <a href="../../jme3/advanced/atom_framework/design.html">Game architecture &amp; Design</a></p></div></div>
<div class="sect2"><h3 id="gquery">GQuery</h3><div class="paragraph"><p>GQuery stand for “JQuery like in Groovy. JQuery is a famous framework in the JavaScript and Web world. GQuery try to provide some of its features, immtimate its syntax and sugars, leverage by Groovy:</p></div>
<div class="ulist"><ul><li><p>Query, select a Node Tree (like <abbr title="HyperText Markup Language">HTML</abbr>, Nifty elements,…) with a minimal Path syntax , same as XPath</p></li><li><p>Hooks to Node&#8217;s (components, elements..) events with Eventbus</p></li></ul></div>
<div class="paragraph"><p>GQuery is a part of my additions for NiftyGUI, others are:</p></div>
<div class="ulist"><ul><li><p>a Groovy builder</p></li><li><p>a <abbr title="Cascading Style Sheets">CSS</abbr> (Cascaded Style Sheet) implementation (for NiftyGUI), even a LESS</p></li><li><p>a simplier Localization framework</p></li><li><p>a lot of scripting and functional sugar for NiftyGUI</p></li></ul></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2018-01-18 02:24:08 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>