<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><title>Simple AppStates Demo</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jmecn/wiki/edit/master/src/docs/asciidoc/programming/game_logic/appstatesdemo.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jmecn/wiki/new/master/src/docs/asciidoc/programming/game_logic/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>Simple AppStates Demo</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#this-demo-is-out-of-date-and-needs-correcting-for-now-please-see">THIS DEMO IS OUT OF DATE AND NEEDS CORRECTING FOR NOW PLEASE SEE</a><ul class="sectlevel2"><li><a href="#main-java">Main.java</a></li><li><a href="#gamerunningstate-java">GameRunningState.java</a></li><li><a href="#settingsscreenstate-java">SettingsScreenState.java</a></li><li><a href="#startscreenstate-java">StartScreenState.java</a></li></ul></li></ul></div></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content"><div class="paragraph"><p>THIS DEMO IS OUT OF DATE AND NEEDS CORRECTING</p></div></td></tr></table></div></div></div>
<div class="sect2"><h3 id="this-demo-is-out-of-date-and-needs-correcting-for-now-please-see">THIS DEMO IS OUT OF DATE AND NEEDS CORRECTING FOR NOW PLEASE SEE</h3><div class="literalblock"><div class="content"><pre>&lt;&lt;jme3/advanced/application_states#,jme3:advanced:application_states&gt;&gt;</pre></div></div>
<div class="paragraph"><p>Note: this tutorial needs to be fixed and is currently not correct.  One should almost never override stateDetached and stateAttachedâ€¦ and should certainly never do anything scene related in them.</p></div>
<div class="paragraph"><p>This demo is a simple example of how you use AppStates to toggle between a StartScreen and a SettingsScreen (press RETURN) while the game is paused, and start the game by switching to a GameRunning state (press BACKSPACE).</p></div>
<div class="paragraph"><p>There are four files, Main.java, GameRunningState.java, StartScreenState.java, SettingsScreenState.java.</p></div>
<div class="sect2"><h3 id="main-java">Main.java</h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">chapter04.appstatedemo</span>;

<span class="keyword">import</span> <span class="include">com.jme3.app.SimpleApplication</span>;
<span class="keyword">import</span> <span class="include">com.jme3.input.KeyInput</span>;
<span class="keyword">import</span> <span class="include">com.jme3.input.controls.ActionListener</span>;
<span class="keyword">import</span> <span class="include">com.jme3.input.controls.KeyTrigger</span>;
<span class="keyword">import</span> <span class="include">com.jme3.input.controls.Trigger</span>;

<span class="comment">/**
 * This demo shows a simple &quot;game&quot; with three AppStates. Instead of game content,
 * it just displays three cubes on different backgrounds.
 * &lt;ul&gt;
 * &lt;li&gt;StartScreenState: This state is enabled
 *     when the user starts the application, or the the game is paused.
 *     Press BACKSPACE to return to the game, press RETURN to go to Settings.&lt;/li&gt;
 * &lt;li&gt;GameRunningState: This state shows the game content and is enabled while the game is running.
 *     Press BACKSPACE to pause and return to the start screen.&lt;/li&gt;
 * &lt;li&gt;SettingsScreenState: This Settings screen state can be reached from the start screen
 *     Press RETURN to toggle it on and off.&lt;/li&gt;
 * &lt;/ul&gt;
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> <span class="directive">extends</span> SimpleApplication {

  <span class="directive">private</span> Trigger pause_trigger = <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_BACK);
  <span class="directive">private</span> Trigger save_trigger = <span class="keyword">new</span> KeyTrigger(KeyInput.KEY_RETURN);
  <span class="directive">private</span> <span class="type">boolean</span> isRunning = <span class="predefined-constant">false</span>; <span class="comment">// starts at startscreen</span>
  <span class="directive">private</span> GameRunningState gameRunningState;
  <span class="directive">private</span> StartScreenState startScreenState;
  <span class="directive">private</span> SettingsScreenState settingsScreenState;


  <span class="comment">/** Start the jMonkeyEngine application */</span>
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
    Main app = <span class="keyword">new</span> Main();
    app.start();
  }

  <span class="comment">/**
   * initialize the scene here
   */</span>
  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> simpleInitApp() {
    setDisplayFps(<span class="predefined-constant">false</span>);
    setDisplayStatView(<span class="predefined-constant">false</span>);

    gameRunningState    = <span class="keyword">new</span> GameRunningState(<span class="local-variable">this</span>);
    startScreenState    = <span class="keyword">new</span> StartScreenState(<span class="local-variable">this</span>);
    settingsScreenState = <span class="keyword">new</span> SettingsScreenState(<span class="local-variable">this</span>);

    stateManager.attach(startScreenState);

    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Game Pause Unpause</span><span class="delimiter">&quot;</span></span>, pause_trigger);
    inputManager.addListener(actionListener, <span class="keyword">new</span> <span class="predefined-type">String</span><span class="type">[]</span>{<span class="string"><span class="delimiter">&quot;</span><span class="content">Game Pause Unpause</span><span class="delimiter">&quot;</span></span>});
    inputManager.addMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Toggle Settings</span><span class="delimiter">&quot;</span></span>, save_trigger);
    inputManager.addListener(actionListener, <span class="keyword">new</span> <span class="predefined-type">String</span><span class="type">[]</span>{<span class="string"><span class="delimiter">&quot;</span><span class="content">Toggle Settings</span><span class="delimiter">&quot;</span></span>});
  }

  <span class="directive">private</span> <span class="predefined-type">ActionListener</span> actionListener = <span class="keyword">new</span> <span class="predefined-type">ActionListener</span>() {
    <span class="directive">public</span> <span class="type">void</span> onAction(<span class="predefined-type">String</span> name, <span class="type">boolean</span> isPressed, <span class="type">float</span> tpf) {
      <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span> + name);
      <span class="keyword">if</span> (name.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Game Pause Unpause</span><span class="delimiter">&quot;</span></span>) &amp;&amp; !isPressed) {
        <span class="keyword">if</span> (isRunning) {
          stateManager.detach(gameRunningState);
          stateManager.attach(startScreenState);
          <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">switching to startscreen...</span><span class="delimiter">&quot;</span></span>);

        } <span class="keyword">else</span> {
          stateManager.detach(startScreenState);
          stateManager.attach(gameRunningState);
          <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">switching to game...</span><span class="delimiter">&quot;</span></span>);
        }
        isRunning = !isRunning;
      } <span class="keyword">else</span> <span class="keyword">if</span> (name.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Toggle Settings</span><span class="delimiter">&quot;</span></span>) &amp;&amp; !isPressed &amp;&amp; !isRunning) {
        <span class="keyword">if</span> (!isRunning &amp;&amp; stateManager.hasState(startScreenState)) {
          stateManager.detach(startScreenState);
          stateManager.attach(settingsScreenState);
          <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">switching to settings...</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> <span class="keyword">if</span> (!isRunning &amp;&amp; stateManager.hasState(settingsScreenState)) {
          stateManager.detach(settingsScreenState);
          stateManager.attach(startScreenState);
          <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">switching to startscreen...</span><span class="delimiter">&quot;</span></span>);
        }
      }
    }
  };

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> simpleUpdate(<span class="type">float</span> tpf) {}

}</code></pre></div></div></div>
<div class="sect2"><h3 id="gamerunningstate-java">GameRunningState.java</h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">chapter04.appstatedemo</span>;

<span class="keyword">import</span> <span class="include">com.jme3.app.Application</span>;
<span class="keyword">import</span> <span class="include">com.jme3.app.SimpleApplication</span>;
<span class="keyword">import</span> <span class="include">com.jme3.app.state.AbstractAppState</span>;
<span class="keyword">import</span> <span class="include">com.jme3.app.state.AppStateManager</span>;
<span class="keyword">import</span> <span class="include">com.jme3.asset.AssetManager</span>;
<span class="keyword">import</span> <span class="include">com.jme3.font.BitmapFont</span>;
<span class="keyword">import</span> <span class="include">com.jme3.font.BitmapText</span>;
<span class="keyword">import</span> <span class="include">com.jme3.material.Material</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.ColorRGBA</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.Vector3f</span>;
<span class="keyword">import</span> <span class="include">com.jme3.renderer.ViewPort</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Geometry</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Node</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.shape.Box</span>;

<span class="comment">/**
 * A template how to create an Application State. This example state simply
 * changes the background color depending on the camera position.
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">GameRunningState</span> <span class="directive">extends</span> AbstractAppState {

  <span class="directive">private</span> ViewPort viewPort;
  <span class="directive">private</span> Node rootNode;
  <span class="directive">private</span> Node guiNode;
  <span class="directive">private</span> AssetManager assetManager;
  <span class="directive">private</span> Node localRootNode = <span class="keyword">new</span> Node(<span class="string"><span class="delimiter">&quot;</span><span class="content">Game Screen RootNode</span><span class="delimiter">&quot;</span></span>);
  <span class="directive">private</span> Node localGuiNode = <span class="keyword">new</span> Node(<span class="string"><span class="delimiter">&quot;</span><span class="content">Game Screen GuiNode</span><span class="delimiter">&quot;</span></span>);
  <span class="directive">private</span> <span class="directive">final</span> ColorRGBA backgroundColor = ColorRGBA.Blue;

  <span class="directive">public</span> GameRunningState(SimpleApplication app){
    <span class="local-variable">this</span>.rootNode     = app.getRootNode();
    <span class="local-variable">this</span>.viewPort      = app.getViewPort();
    <span class="local-variable">this</span>.guiNode       = app.getGuiNode();
    <span class="local-variable">this</span>.assetManager  = app.getAssetManager();
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> initialize(AppStateManager stateManager, Application app) {
    <span class="local-variable">super</span>.initialize(stateManager, app);

    <span class="comment">/** Load this scene */</span>
    viewPort.setBackgroundColor(backgroundColor);

    <span class="predefined-type">Box</span> mesh = <span class="keyword">new</span> <span class="predefined-type">Box</span>(Vector3f.ZERO, <span class="integer">1</span>, <span class="integer">1</span>, <span class="integer">1</span>);
    Geometry geom = <span class="keyword">new</span> Geometry(<span class="string"><span class="delimiter">&quot;</span><span class="content">Box</span><span class="delimiter">&quot;</span></span>, mesh);
    Material mat = <span class="keyword">new</span> Material(assetManager,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/Unshaded.j3md</span><span class="delimiter">&quot;</span></span>);
    mat.setColor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Color</span><span class="delimiter">&quot;</span></span>, ColorRGBA.Green);
    geom.setMaterial(mat);
    geom.setLocalTranslation(<span class="integer">1</span>, <span class="integer">0</span>, <span class="integer">0</span>);
    localRootNode.attachChild(geom);

    <span class="comment">/** Load the HUD*/</span>
    BitmapFont guiFont = assetManager.loadFont(
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Interface/Fonts/Default.fnt</span><span class="delimiter">&quot;</span></span>);
    BitmapText displaytext = <span class="keyword">new</span> BitmapText(guiFont);
    displaytext.setSize(guiFont.getCharSet().getRenderedSize());
    displaytext.move(<span class="integer">10</span>, displaytext.getLineHeight() + <span class="integer">20</span>, <span class="integer">0</span>);
    displaytext.setText(<span class="string"><span class="delimiter">&quot;</span><span class="content">Game running. Press BACKSPACE to pause and return to the start screen.</span><span class="delimiter">&quot;</span></span>);
    localGuiNode.attachChild(displaytext);
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> update(<span class="type">float</span> tpf) {
    <span class="comment">/** the action happens here */</span>
    Vector3f v = viewPort.getCamera().getLocation();
    viewPort.setBackgroundColor(<span class="keyword">new</span> ColorRGBA(v.getX() / <span class="integer">10</span>, v.getY() / <span class="integer">10</span>, v.getZ() / <span class="integer">10</span>, <span class="integer">1</span>));
    rootNode.getChild(<span class="string"><span class="delimiter">&quot;</span><span class="content">Box</span><span class="delimiter">&quot;</span></span>).rotate(tpf, tpf, tpf);
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> stateAttached(AppStateManager stateManager) {
    rootNode.attachChild(localRootNode);
    guiNode.attachChild(localGuiNode);
    viewPort.setBackgroundColor(backgroundColor);
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> stateDetached(AppStateManager stateManager) {
    rootNode.detachChild(localRootNode);
    guiNode.detachChild(localGuiNode);

  }

}</code></pre></div></div></div>
<div class="sect2"><h3 id="settingsscreenstate-java">SettingsScreenState.java</h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">chapter04.appstatedemo</span>;

<span class="keyword">import</span> <span class="include">com.jme3.app.Application</span>;
<span class="keyword">import</span> <span class="include">com.jme3.app.SimpleApplication</span>;
<span class="keyword">import</span> <span class="include">com.jme3.app.state.AbstractAppState</span>;
<span class="keyword">import</span> <span class="include">com.jme3.app.state.AppStateManager</span>;
<span class="keyword">import</span> <span class="include">com.jme3.asset.AssetManager</span>;
<span class="keyword">import</span> <span class="include">com.jme3.font.BitmapFont</span>;
<span class="keyword">import</span> <span class="include">com.jme3.font.BitmapText</span>;
<span class="keyword">import</span> <span class="include">com.jme3.material.Material</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.ColorRGBA</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.Vector3f</span>;
<span class="keyword">import</span> <span class="include">com.jme3.renderer.ViewPort</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Geometry</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Node</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.shape.Box</span>;

<span class="comment">/**
 * A template how to create an Application State. This example state simply
 * changes the background color depending on the camera position.
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SettingsScreenState</span> <span class="directive">extends</span> AbstractAppState {

  <span class="directive">private</span> ViewPort viewPort;
  <span class="directive">private</span> Node rootNode;
  <span class="directive">private</span> Node guiNode;
  <span class="directive">private</span> AssetManager assetManager;
  <span class="directive">private</span> Node localRootNode = <span class="keyword">new</span> Node(<span class="string"><span class="delimiter">&quot;</span><span class="content">Settings Screen RootNode</span><span class="delimiter">&quot;</span></span>);
  <span class="directive">private</span> Node localGuiNode = <span class="keyword">new</span> Node(<span class="string"><span class="delimiter">&quot;</span><span class="content">Settings Screen GuiNode</span><span class="delimiter">&quot;</span></span>);
  <span class="directive">private</span> <span class="directive">final</span> ColorRGBA backgroundColor = ColorRGBA.DarkGray;

  <span class="directive">public</span> SettingsScreenState(SimpleApplication app) {
    <span class="local-variable">this</span>.rootNode     = app.getRootNode();
    <span class="local-variable">this</span>.viewPort      = app.getViewPort();
    <span class="local-variable">this</span>.guiNode       = app.getGuiNode();
    <span class="local-variable">this</span>.assetManager  = app.getAssetManager();
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> initialize(AppStateManager stateManager, Application app) {
    <span class="local-variable">super</span>.initialize(stateManager, app);

    <span class="comment">/** Load this scene */</span>
    viewPort.setBackgroundColor(backgroundColor);

    <span class="predefined-type">Box</span> mesh = <span class="keyword">new</span> <span class="predefined-type">Box</span>(<span class="keyword">new</span> Vector3f(-<span class="integer">1</span>, -<span class="integer">1</span>, <span class="integer">0</span>), <span class="float">.5f</span>, <span class="float">.5f</span>, <span class="float">.5f</span>);
    Geometry geom = <span class="keyword">new</span> Geometry(<span class="string"><span class="delimiter">&quot;</span><span class="content">Box</span><span class="delimiter">&quot;</span></span>, mesh);
    Material mat = <span class="keyword">new</span> Material(assetManager,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/Unshaded.j3md</span><span class="delimiter">&quot;</span></span>);
    mat.setColor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Color</span><span class="delimiter">&quot;</span></span>, ColorRGBA.Red);
    geom.setMaterial(mat);
    geom.setLocalTranslation(<span class="integer">1</span>, <span class="integer">0</span>, <span class="integer">0</span>);
    localRootNode.attachChild(geom);

    <span class="comment">/** Load the HUD */</span>
    BitmapFont guiFont = assetManager.loadFont(
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Interface/Fonts/Default.fnt</span><span class="delimiter">&quot;</span></span>);
    BitmapText displaytext = <span class="keyword">new</span> BitmapText(guiFont);
    displaytext.setSize(guiFont.getCharSet().getRenderedSize());
    displaytext.move(<span class="integer">10</span>, displaytext.getLineHeight() + <span class="integer">20</span>, <span class="integer">0</span>);
    displaytext.setText(<span class="string"><span class="delimiter">&quot;</span><span class="content">Settings screen. Press RETURN to save </span><span class="delimiter">&quot;</span></span>
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">and return to start screen.</span><span class="delimiter">&quot;</span></span>);
    localGuiNode.attachChild(displaytext);
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> update(<span class="type">float</span> tpf) {
     <span class="comment">/** the action happens here */</span>
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> stateAttached(AppStateManager stateManager) {
    rootNode.attachChild(localRootNode);
    guiNode.attachChild(localGuiNode);
    viewPort.setBackgroundColor(backgroundColor);
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> stateDetached(AppStateManager stateManager) {
    rootNode.detachChild(localRootNode);
    guiNode.detachChild(localGuiNode);
  }

}</code></pre></div></div></div>
<div class="sect2"><h3 id="startscreenstate-java">StartScreenState.java</h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">chapter04.appstatedemo</span>;

<span class="keyword">import</span> <span class="include">com.jme3.app.Application</span>;
<span class="keyword">import</span> <span class="include">com.jme3.app.SimpleApplication</span>;
<span class="keyword">import</span> <span class="include">com.jme3.app.state.AbstractAppState</span>;
<span class="keyword">import</span> <span class="include">com.jme3.app.state.AppStateManager</span>;
<span class="keyword">import</span> <span class="include">com.jme3.asset.AssetManager</span>;
<span class="keyword">import</span> <span class="include">com.jme3.font.BitmapFont</span>;
<span class="keyword">import</span> <span class="include">com.jme3.font.BitmapText</span>;
<span class="keyword">import</span> <span class="include">com.jme3.material.Material</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.ColorRGBA</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.Vector3f</span>;
<span class="keyword">import</span> <span class="include">com.jme3.renderer.ViewPort</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Geometry</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Node</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.shape.Box</span>;

<span class="comment">/**
 * A template how to create an Application State. This example state simply
 * changes the background color depending on the camera position.
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">StartScreenState</span> <span class="directive">extends</span> AbstractAppState {

  <span class="directive">private</span> ViewPort viewPort;
  <span class="directive">private</span> Node rootNode;
  <span class="directive">private</span> Node guiNode;
  <span class="directive">private</span> AssetManager assetManager;
  <span class="directive">private</span> Node localRootNode = <span class="keyword">new</span> Node(<span class="string"><span class="delimiter">&quot;</span><span class="content">Start Screen RootNode</span><span class="delimiter">&quot;</span></span>);
  <span class="directive">private</span> Node localGuiNode = <span class="keyword">new</span> Node(<span class="string"><span class="delimiter">&quot;</span><span class="content">Start Screen GuiNode</span><span class="delimiter">&quot;</span></span>);
  <span class="directive">private</span> <span class="directive">final</span> ColorRGBA backgroundColor = ColorRGBA.Gray;

<span class="directive">public</span> StartScreenState(SimpleApplication app){
    <span class="local-variable">this</span>.rootNode     = app.getRootNode();
    <span class="local-variable">this</span>.viewPort     = app.getViewPort();
    <span class="local-variable">this</span>.guiNode      = app.getGuiNode();
    <span class="local-variable">this</span>.assetManager = app.getAssetManager();
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> initialize(AppStateManager stateManager, Application app) {
    <span class="local-variable">super</span>.initialize(stateManager, app);

    <span class="comment">/** Init this scene */</span>
    viewPort.setBackgroundColor(backgroundColor);

    <span class="predefined-type">Box</span> mesh = <span class="keyword">new</span> <span class="predefined-type">Box</span>(<span class="keyword">new</span> Vector3f(-<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">0</span>), <span class="float">.5f</span>,<span class="float">.5f</span>,<span class="float">.5f</span>);
    Geometry geom = <span class="keyword">new</span> Geometry(<span class="string"><span class="delimiter">&quot;</span><span class="content">Box</span><span class="delimiter">&quot;</span></span>, mesh);
    Material mat = <span class="keyword">new</span> Material(assetManager,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/Unshaded.j3md</span><span class="delimiter">&quot;</span></span>);
    mat.setColor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Color</span><span class="delimiter">&quot;</span></span>, ColorRGBA.Yellow);
    geom.setMaterial(mat);
    geom.setLocalTranslation(<span class="integer">1</span>, <span class="integer">0</span>, <span class="integer">0</span>);
    localRootNode.attachChild(geom);

    <span class="comment">/** Load a HUD */</span>
    BitmapFont guiFont = assetManager.loadFont(
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Interface/Fonts/Default.fnt</span><span class="delimiter">&quot;</span></span>);
    BitmapText displaytext = <span class="keyword">new</span> BitmapText(guiFont);
    displaytext.setSize(guiFont.getCharSet().getRenderedSize());
    displaytext.move( <span class="integer">10</span>, displaytext.getLineHeight() + <span class="integer">20</span>,  <span class="integer">0</span>);
    displaytext.setText(<span class="string"><span class="delimiter">&quot;</span><span class="content">Start screen. Press BACKSPACE to resume the game, </span><span class="delimiter">&quot;</span></span>
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">press RETURN to edit Settings.</span><span class="delimiter">&quot;</span></span>);
    localGuiNode.attachChild(displaytext);
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> update(<span class="type">float</span> tpf) {
    <span class="comment">/** the action happens here */</span>
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> stateAttached(AppStateManager stateManager) {
    rootNode.attachChild(localRootNode);
    guiNode.attachChild(localGuiNode);
    viewPort.setBackgroundColor(backgroundColor);
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> stateDetached(AppStateManager stateManager) {
    rootNode.detachChild(localRootNode);
    guiNode.detachChild(localGuiNode);
  }

}</code></pre></div></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2018-01-24 04:23:44 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>