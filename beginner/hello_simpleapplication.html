<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><meta name="author" content="(翻译 jmecn)"><meta name="keywords" content="beginner, intro, documentation, init, simpleapplication, basegame"><title>jMonkeyEngine 3 教程 (1) - SimpleApplication</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jmecn/wiki/edit/master/src/docs/asciidoc/beginner/hello_simpleapplication.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jmecn/wiki/new/master/src/docs/asciidoc/beginner/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>jMonkeyEngine 3 教程 (1) - SimpleApplication</h1><div class="details"><span class="author" id="author">(翻译 jmecn)</span><br><span id="revnumber">version ,</span> <span id="revdate">2018/01/22 15:49</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#创建一个工程项目">创建一个工程项目</a></li><li><a href="#继承-extend-simpleapplication">继承(Extend) SimpleApplication</a></li><li><a href="#代码样例">代码样例</a></li><li><a href="#理解代码">理解代码</a><ul class="sectlevel2"><li><a href="#启动simpleapplication">启动SimpleApplication</a></li><li><a href="#理解术语">理解术语</a></li><li><a href="#初始化场景">初始化场景</a></li><li><a href="#未来的simpleapplication">未来的SimpleApplication</a></li></ul></li><li><a href="#结语">结语</a></li></ul></div></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>上一篇: <a href="../getting-start/index.html">下载和安装</a>,
下一篇: <a href="../beginner/hello_node.html">节点</a></p></div>
<div class="paragraph"><p><strong>先决条件:</strong> 这个教程假设你已经 <a href="../sdk/index.html">安装jMonkeyEngine SDK</a>.</p></div>
<div class="paragraph"><p>在这个教程系列，我们假设你使用jMonkeyEngine <a href="../sdk.html">SDK</a>。作为中高级Java开发者，你会很快发现你可以在任何ide(NetBeans IDE, Eclipse, IntelliJ) 甚至 <a href="../jme3/simpleapplication_from_the_commandline.html">命令行模式</a>中开发jMonkeyEngine代码。</p></div>
<div class="paragraph"><p>那么开始我们的第一个jMonkeyEngine3应用程序。</p></div></div></div>
<div class="sect1"><h2 id="创建一个工程项目">创建一个工程项目</h2><div class="sectionbody"><div class="paragraph"><p>在jMonkeyEngine SDK:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>在主菜单选择 <code><span class="menuseq"><span class="menu">File</span>&#160;&#9656; <span class="menuitem">New Project</span></span></code>。</p></li><li><p>选择样例 <code><span class="menuseq"><span class="menu">JME3</span>&#160;&#9656; <span class="menuitem">Basic Game</span></span></code>。</p></li><li><p>点击 <b class="button">Next</b>。</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>输入项目名，比如 &#8220;HelloWorldTutorial&#8221;。</p></li><li><p>输入新项目的路径，比如 <code>jMonkeyProjects</code>。</p></li></ol></div></li><li><p>点击 <b class="button">Finish</b></p></li></ol></div>
<div class="paragraph"><p>这会创建一个基本jme3应用。点击运行：你会看到一个蓝色立方体。详情了解 <a href="../sdk/project_creation.html">创建jME3工程</a></p></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content"><div class="paragraph"><p>我们建议你自己跟着跟着教程。或者，你可以在jMonkeyEngine SDK创建一个 <a href="../sdk/sample_code.html">JmeTests</a> 项目模板。它会创建一个带有 <code>jme3test.helloworld</code> （和更多）的样例。比如，你可以使用JmeTests来检查你的代码。</p></div></td></tr></table></div></div></div>
<div class="sect1"><h2 id="继承-extend-simpleapplication">继承(Extend) SimpleApplication</h2><div class="sectionbody"><div class="paragraph"><p>在这个教程，你的工程项目需要包含jme3test.helloworld包和HelloJME.java文件。</p></div>
<div class="paragraph"><p>在jMonkeyEngine SDK:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>在 <code>Source Packages</code> ， <b class="button">鼠标右键点击</b> &#8220;mygame&#8221; 包。</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>选择： <code><span class="menuseq"><span class="menu">Refactor</span>&#160;&#9656; <span class="menuitem">Rename</span></span></code></p></li><li><p>输入新名称： <code>jme3test.helloworld</code></p></li><li><p>完成后点击 <b class="button">Refactor</b>。</p></li></ol></div></li><li><p>在重构后的包， <b class="button">鼠标右键点击</b> <code>Main.java</code> 类。</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>选择：<code><span class="menuseq"><span class="menu">Refactor</span>&#160;&#9656; <span class="menuitem">Rename</span></span></code></p></li><li><p>输入新名称： <code>HelloJME3</code></p></li><li><p>完成后点击 <b class="button">Refactor</b>。</p></li></ol></div></li></ol></div>
<div class="paragraph"><p>对余下的教程同样使用这个基本流程</p></div>
<div class="paragraph"><p>小窍门：余下的教程都使用一样的 <code>jme3test.helloworld</code> 包。只需重构 <code>Main.java</code> 类名到教程样例的类名，而不是对每个教程都创建新项目。</p></div></div></div>
<div class="sect1"><h2 id="代码样例">代码样例</h2><div class="sectionbody"><div class="paragraph"><p>用以下代码，替换HelloJME3.java原来的代码。</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">jme3test.helloworld</span>;

<span class="keyword">import</span> <span class="include">com.jme3.app.SimpleApplication</span>;
<span class="keyword">import</span> <span class="include">com.jme3.material.Material</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Geometry</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.shape.Box</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.ColorRGBA</span>;

<span class="comment">/**
 * 例1 - 创建一个最简单的 jME3 应用程序.
 * 在画面中显示一个蓝色的3D方块，通过滑动鼠标、按WASD健来控制摄像机。
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloJME3</span> <span class="directive">extends</span> SimpleApplication {

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args){
        HelloJME3 app = <span class="keyword">new</span> HelloJME3();
        app.start(); <span class="comment">// 启动游戏</span>
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> simpleInitApp() {
        <span class="predefined-type">Box</span> b = <span class="keyword">new</span> <span class="predefined-type">Box</span>(<span class="integer">1</span>, <span class="integer">1</span>, <span class="integer">1</span>);                <span class="comment">// 创建一个边长为1的立方体网格</span>
        Geometry geom = <span class="keyword">new</span> Geometry(<span class="string"><span class="delimiter">&quot;</span><span class="content">Box</span><span class="delimiter">&quot;</span></span>, b);  <span class="comment">// 使用这个网格来设置几何体(Geometry)的形状</span>

        Material mat = <span class="keyword">new</span> Material(assetManager,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/Unshaded.j3md</span><span class="delimiter">&quot;</span></span>);<span class="comment">// 创建一个简单的材质</span>
        mat.setColor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Color</span><span class="delimiter">&quot;</span></span>, ColorRGBA.Blue);   <span class="comment">// 把材质的颜色(Color)参数设为蓝色(Blue)</span>
        geom.setMaterial(mat);                   <span class="comment">// 使用这个材质来设置几何体(Geometry)的外观</span>

        rootNode.attachChild(geom);              <span class="comment">// 让这个3D方块显示在画面上</span>
    }
}</code></pre></div></div>
<div class="paragraph"><p><b class="button">鼠标右键点击</b> <code>HelloJME3</code> 类，然后选择 <code>Run</code>。 如果jME3的设置对话框弹出，确认默认设置。</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>你应该看到一个窗口显示一个3d立方体。</p></li><li><p>按下 <kbd>W</kbd> <kbd>A</kbd> <kbd>S</kbd> <kbd>D</kbd> 键和移动鼠标来航行。</p></li><li><p>在坐下角可以查看FPS（刷新率）和object count（物体数量）信息。 你将会在开发过程中运用到这些信息，你也会在发行版本中移除它。（确认第14行显示有14个物体和914个顶点。）</p></li><li><p>按下 <kbd>Esc</kbd> 关闭程序。</p></li></ol></div>
<div class="paragraph"><p>一起来看看它是如何运作的！</p></div></div></div>
<div class="sect2"><h3 id="理解代码">理解代码</h3><div class="paragraph"><p>以上代码初始化了场景和启动程序。</p></div>
<div class="sect2"><h3 id="启动simpleapplication">启动SimpleApplication</h3><div class="paragraph"><p>看到第1行，你的 HelloJME3.java 类继承了`com.jme3.app.SimpleApplication`。</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">HelloJME3</span> <span class="directive">extends</span> SimpleApplication {
    <span class="comment">// 你的代码...</span>
}</code></pre></div></div>
<div class="paragraph"><p>每个JME3游戏是一个 <code>com.jme3.app.SimpleApplication</code> 类的实例。SimpleApplication是一个最简单的应用：它管理3d场景，检测用户输入，更新游戏状况和自动渲染窗口。这些是游戏引擎的核心功能。你通过继承这个类，然后修改定制你自己的游戏。</p></div>
<div class="paragraph"><p>你通过main()函数来启动所有JME3游戏，就像所有标准Java程序一样。</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>实例化你基于 `SimpleApplication`的类</p></li><li><p>调用程序的 <code>start()</code> 函数来启动游戏引擎。</p></li></ol></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args){
        HelloJME3 app = <span class="keyword">new</span> HelloJME3(); <span class="comment">// 实例化游戏</span>
        app.start();                     <span class="comment">// 启动游戏!</span>
    }</code></pre></div></div>
<div class="paragraph"><p><code>app.start();</code> 行打开应用窗口。让我们一起学习如何向窗口（场景）加入一些东西。</p></div></div>
<div class="sect2"><h3 id="理解术语">理解术语</h3><table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">你想要做什么</th><th class="tableblock halign-left valign-top">你如何用JME3术语来描述它</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>你想创建一个立方体</p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>我创建一个 1x1x1 Box shape（盒状）的Geometry（几何形状）</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>你想用蓝颜色</p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>我创建一个蓝颜色的材质</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>你想给立方体涂上蓝色</p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>我设置几何形状的材质</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>你想把立方体放进场景</p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>我attach（附着）几何形状到rootNode（根节点）</p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>你想立方体放在窗口中央</p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>我在 <code>Vector3f.ZERO</code> 创建几何形状</p></div></div></td></tr></tbody></table>
<div class="paragraph"><p>如果你对这些单词不熟悉，查看 <a href="../jme3/the_scene_graph.html">the Scene Graph</a></p></div></div>
<div class="sect2"><h3 id="初始化场景">初始化场景</h3><div class="paragraph"><p>查看剩下的代码。 <code>simpleInitApp()</code> 函数是在程序开始自动调用一次。所有JME3游戏一定含有这个函数。在函数 <code>simpleInitApp()</code> 中，你在游戏开始前加载游戏对象。</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">public</span> <span class="type">void</span> simpleInitApp() {
       <span class="comment">// 你的初始化代码...</span>
    }</code></pre></div></div>
<div class="paragraph"><p>立方体的初始化代码如下：</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">public</span> <span class="type">void</span> simpleInitApp() {
        <span class="predefined-type">Box</span> b = <span class="keyword">new</span> <span class="predefined-type">Box</span>(<span class="integer">1</span>, <span class="integer">1</span>, <span class="integer">1</span>);                <span class="comment">// 创建一个边长为1的立方体网格</span>
        Geometry geom = <span class="keyword">new</span> Geometry(<span class="string"><span class="delimiter">&quot;</span><span class="content">Box</span><span class="delimiter">&quot;</span></span>, b);  <span class="comment">// 使用这个网格来设置几何体(Geometry)的形状</span>

        Material mat = <span class="keyword">new</span> Material(assetManager,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/Unshaded.j3md</span><span class="delimiter">&quot;</span></span>);<span class="comment">// 创建一个简单的材质</span>
        mat.setColor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Color</span><span class="delimiter">&quot;</span></span>, ColorRGBA.Blue);   <span class="comment">// 把材质的颜色(Color)参数设为蓝色(Blue)</span>
        geom.setMaterial(mat);                   <span class="comment">// 使用这个材质来设置几何体(Geometry)的外观</span>

        rootNode.attachChild(geom);              <span class="comment">// 让这个3D方块显示在画面上</span>
    }</code></pre></div></div>
<div class="paragraph"><p>一个JME3游戏有以下初始化过程：</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>初始化游戏对象：</p><div class="ulist"><ul><li><p>你创建或加载对象和放置它们。</p></li><li><p>你通过附着对象到 <code>rootNode</code> 来让他们在场景中显示。</p></li><li><p><strong>例子</strong> 加载玩家，地形，天空，敌对目标，障碍物，&#8230;&#8203;，和放置它们到它们的起始位置。</p></li></ul></div></li><li><p>初始化变量：</p><div class="ulist"><ul><li><p>你创建变量来跟踪游戏状况。</p></li><li><p>你设置变量的初始值。</p></li><li><p><strong>例子:</strong> 设置 <code>score</code> 到0，设置 <code>health</code> 到100%， &#8230;&#8203;</p></li></ul></div></li><li><p>初始化按键和鼠标的监听：</p><div class="ulist"><ul><li><p>以下输入已经提前设置：</p><div class="ulist"><ul><li><p><kbd>W</kbd> <kbd>A</kbd> <kbd>S</kbd> <kbd>D</kbd> 按键 - 移动</p></li><li><p>鼠标移动和方向键 - 转动摄像机</p></li><li><p><kbd>Esc</kbd>  按键 - 退出游戏</p></li></ul></div></li><li><p>定义你自己的附加按键和鼠标监听。</p></li><li><p>*例子：*点击鼠标来发射子弹，按下 <kbd>Space</kbd> 来跳跃， &#8230;&#8203;</p></li></ul></div></li></ol></div></div>
<div class="sect2"><h3 id="未来的simpleapplication">未来的SimpleApplication</h3><div class="paragraph"><p>我们有个打算要更改SimpleApplication。过去的一段时间，我们认为我们应该改写Application类。SimpleApplication是一个比较特殊的存在，它一方面使得程序变得简单，但另一方面新用户不能接受不清楚在哪里的 'cam' 和 'assetManager' 。不幸的是，很多关于Application的代码很难更改&#8230;&#8203;特别是AppState。</p></div>
<div class="paragraph"><p>所以我们另外想出了个计划：把Application类(class)改成接口(interface)。这会在更改基于Application的类有更大的空间。详情可以查看<a href="https://hub.jmonkeyengine.org/t/jmonkeyengine-3-1-alpha-4-released/35478">这里</a>。像之前说的我们在计划一个更好的设计，虽然如今不强制要求，但这是可行的。</p></div>
<div class="paragraph"><p>如果你查看SimpleApplication的默认构造函数，你会了解它的工作方式。</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> SimpleApplication() {<span class="error"> </span><span class="error"> </span><span class="error"> </span>
    <span class="local-variable">this</span>(<span class="keyword">new</span> StatsAppState(), <span class="keyword">new</span> FlyCamAppState(), <span class="keyword">new</span> AudioListenerState(), <span class="keyword">new</span> DebugKeysAppState());}</code></pre></div></div>
<div class="paragraph"><p>这个应用基本上是往构造函数放入AppState。一起查看第二个构造函数。</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> SimpleApplication( AppState... initialStates ) {<span class="error"> </span><span class="error"> </span><span class="error"> </span>
    <span class="local-variable">super</span>(initialStates);
}</code></pre></div></div>
<div class="paragraph"><p>它让你向你的应用放入你想要的AppState。所以SImpleApplication对于测试项目很有用（我个人经常这样做）但我建议对于完整的游戏这样使用它：</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">MyGame</span> <span class="directive">extends</span> SimpleApplication {

    <span class="directive">public</span> MyGame(){
         <span class="local-variable">super</span>(<span class="keyword">new</span> MyCustomSate(), <span class="keyword">new</span> AnotherState(), ....);
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        MyGame app = <span class="keyword">new</span> MyGame();
        app.start();
    }

}</code></pre></div></div>
<div class="paragraph"><p>然后在 <a href="../jme3/advanced/application_states.html">AppStates</a> 实现所有的机制，这样你的SimpleApplication不会有很大的改变，只是加入引导用的AppState（或者你也可以用AppState来管理ApState），SimpleApplication只是添加了一系列你要用到的AppState。</p></div>
<div class="paragraph"><p>在未来所有在SimpleApplication的代码会更改成AppState（InputHandlingState,RenderAppState,等等），然后你自己决定添加哪个AppState。只因为对旧代码的使用，我们如今暂时保留它。</p></div></div></div>
<div class="sect1"><h2 id="结语">结语</h2><div class="sectionbody"><div class="paragraph"><p>你已经学会了SimpleApplication可以作为很好的起点，因为他向你提供了：</p></div>
<div class="ulist"><ul><li><p><code>simpleInitApp()</code> 函数来创建对象。</p></li><li><p><code>rootNode</code> ，通过附加(attach)上对象来让它们在窗口上显示。</p></li><li><p>默认的设置让你在场景中航行</p></li></ul></div>
<div class="paragraph"><p>在开发游戏程序过程中，你需要：
. 初始化游戏场景
. 触发游戏机制
. 回应用户输入</p></div>
<div class="paragraph"><p>余下的教程会教你如何在jMonkeyEngine 3中实现这些。</p></div>
<div class="paragraph"><p>继续 <a href="../beginner/hello_node.html">Hello Node</a> 教程，你会学到更多关于如何初始化游戏世界或者说场景的知识。</p></div>
<hr>
<div class="paragraph"><p>参阅：</p></div>
<div class="ulist"><ul><li><p><a href="../getting-start/index.html">安装jME3</a></p></li><li><p><a href="../jme3/simpleapplication_from_the_commandline.html">SimpleApplication From the Commandline</a></p></li><li><p><a href="../sdk/project_creation.html">创建jME3工程</a></p></li><li><p><a href="../jme3/advanced/application_states.html">AppStates</a></p></li></ul></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2018-10-03 07:47:49 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>